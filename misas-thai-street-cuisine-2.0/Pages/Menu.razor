@page "/Menu"
@using misas_thai_street_cuisine_2._0.Models
@inject ShoppingCartService Cart

<div class="menu-container">
    <h2 class='page-header-text'>Choose Your Flavor Fix</h2>

    <div class="menu-section">
        <h3 class="section-header-text">The Platter</h3>
        <ul>
            <li>
                <img src="/Resources/Images/Food/The Platter.jpg" alt="Thai Sausage Platter" />
                <span class="item-price">$25.00</span>
                <div class="details-text">
                    <p>8 oz Sai Ua Sausage</p>
                    <p>6 oz Sticky rice</p>
                    <p>2 oz Prik Noom Chili Paste OR Jao Dip</p>
                </div>
                <div class="cart-controls">
                    @{
                        var platterItem = new MenuItem 
                        { 
                            Id = 1, 
                            Name = "The Platter", 
                            Price = 25.00m, 
                            Category = "Platters",
                            Description = "8 oz Sai Ua Sausage, 6 oz Sticky rice, 2 oz Prik Noom Chili Paste OR Jao Dip"
                        };
                        var platterQuantity = Cart.GetQuantity(platterItem);
                    }
                    
                    @if (platterQuantity == 0)
                    {
                        <button class="btn btn-primary add-to-cart-btn" @onclick="() => Cart.AddItem(platterItem)">
                            Add to Cart
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(platterItem)">-</button>
                            <span class="quantity-display">@platterQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(platterItem)">+</button>
                        </div>
                    }
                </div>
            </li>
        </ul>
    </div>

    <div class="menu-section">
        <h3 class="section-header-text">The Party Platter</h3>
        <ul>
            <li>
                <img src="/Resources/Images/Food/The Platter.jpg" alt="Family Party Platter" />
                <span class="item-price">$62.50</span>
                <div class="details-text">
                    <p>20 oz Sai Ua Sausage</p>
                    <p>15 oz Sticky Rice</p>
                    <p>5 oz Jao Dip</p>
                    <p>5 oz Prik Noom Chili Paste OR Jao Dip</p>
                </div>
                <div class="cart-controls">
                    @{
                        var partyPlatterItem = new MenuItem 
                        { 
                            Id = 2, 
                            Name = "The Party Platter", 
                            Price = 62.50m, 
                            Category = "Platters",
                            Description = "20 oz Sai Ua Sausage, 15 oz Sticky Rice, 5 oz Jao Dip, 5 oz Prik Noom Chili Paste OR Jao Dip"
                        };
                        var partyPlatterQuantity = Cart.GetQuantity(partyPlatterItem);
                    }
                    
                    @if (partyPlatterQuantity == 0)
                    {
                        <button class="btn btn-primary add-to-cart-btn" @onclick="() => Cart.AddItem(partyPlatterItem)">
                            Add to Cart
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(partyPlatterItem)">-</button>
                            <span class="quantity-display">@partyPlatterQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(partyPlatterItem)">+</button>
                        </div>
                    }
                </div>
            </li>
        </ul>
    </div>

    <div class="menu-section">
        <h3 class="section-header-text">Frozen Link</h3>
        <ul>
            <li>
                <img src="/Resources/Images/Gallery/frozen-link.jpg" alt="Frozen Link" />
                <span class="item-price">$12.00</span>
                <div class="details-text">
                    <p>1x 8 oz link of frozen Sai Ua Sausage</p>
                </div>
                <div class="cart-controls">
                    @{
                        var frozenLinkItem = new MenuItem 
                        { 
                            Id = 3, 
                            Name = "Frozen Link", 
                            Price = 12.00m, 
                            Category = "Frozen",
                            Description = "1x 8 oz link of frozen Sai Ua Sausage"
                        };
                        var frozenLinkQuantity = Cart.GetQuantity(frozenLinkItem);
                    }
                    
                    @if (frozenLinkQuantity == 0)
                    {
                        <button class="btn btn-primary add-to-cart-btn" @onclick="() => Cart.AddItem(frozenLinkItem)">
                            Add to Cart
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(frozenLinkItem)">-</button>
                            <span class="quantity-display">@frozenLinkQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(frozenLinkItem)">+</button>
                        </div>
                    }
                </div>
            </li>
        </ul>
    </div>
    <div class="menu-section">
        <h3 class="section-header-text">Frozen Coil</h3>
        <ul>
            <li>
                <img src="/Resources/Images/Gallery/frozen-platter.jpg" alt="Frozen Coil" />
                <span class="item-price">$30.00</span>
                <div class="details-text">
                    <p>1x 20 oz coil of frozen Sai Ua Sausage</p>
                </div>
                <div class="cart-controls">
                    @{
                        var frozenCoilItem = new MenuItem 
                        { 
                            Id = 4, 
                            Name = "Frozen Coil", 
                            Price = 30.00m, 
                            Category = "Frozen",
                            Description = "1x 20 oz coil of frozen Sai Ua Sausage"
                        };
                        var frozenCoilQuantity = Cart.GetQuantity(frozenCoilItem);
                    }
                    
                    @if (frozenCoilQuantity == 0)
                    {
                        <button class="btn btn-primary add-to-cart-btn" @onclick="() => Cart.AddItem(frozenCoilItem)">
                            Add to Cart
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(frozenCoilItem)">-</button>
                            <span class="quantity-display">@frozenCoilQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(frozenCoilItem)">+</button>
                        </div>
                    }
                </div>
            </li>
        </ul>
    </div>

    <div class="menu-section">
        <h3 class="section-header-text">Add-Ons</h3>
        <ul>
            <li>
                <span class="addon-name">Extra Sai Ua (4oz)</span>
                <span class="addon-price">$8.25</span>
                <div class="cart-controls">
                    @{
                        var extraSaiUaItem = new MenuItem 
                        { 
                            Id = 5, 
                            Name = "Extra Sai Ua (4oz)", 
                            Price = 8.25m, 
                            Category = "Add-Ons"
                        };
                        var extraSaiUaQuantity = Cart.GetQuantity(extraSaiUaItem);
                    }
                    
                    @if (extraSaiUaQuantity == 0)
                    {
                        <button class="btn btn-primary btn-sm add-to-cart-btn" @onclick="() => Cart.AddItem(extraSaiUaItem)">
                            Add
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(extraSaiUaItem)">-</button>
                            <span class="quantity-display">@extraSaiUaQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(extraSaiUaItem)">+</button>
                        </div>
                    }
                </div>
            </li>
            <li>
                <span class="addon-name">Extra Sticky Rice (2oz)</span>
                <span class="addon-price">$2.00</span>
                <div class="cart-controls">
                    @{
                        var extraRiceItem = new MenuItem 
                        { 
                            Id = 6, 
                            Name = "Extra Sticky Rice (2oz)", 
                            Price = 2.00m, 
                            Category = "Add-Ons"
                        };
                        var extraRiceQuantity = Cart.GetQuantity(extraRiceItem);
                    }
                    
                    @if (extraRiceQuantity == 0)
                    {
                        <button class="btn btn-primary btn-sm add-to-cart-btn" @onclick="() => Cart.AddItem(extraRiceItem)">
                            Add
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(extraRiceItem)">-</button>
                            <span class="quantity-display">@extraRiceQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(extraRiceItem)">+</button>
                        </div>
                    }
                </div>
            </li>
            <li>
                <span class="addon-name">Extra Prik Noom (2oz)</span>
                <span class="addon-price">$3.55</span>
                <div class="cart-controls">
                    @{
                        var extraPrikNoomItem = new MenuItem 
                        { 
                            Id = 7, 
                            Name = "Extra Prik Noom (2oz)", 
                            Price = 3.55m, 
                            Category = "Add-Ons"
                        };
                        var extraPrikNoomQuantity = Cart.GetQuantity(extraPrikNoomItem);
                    }
                    
                    @if (extraPrikNoomQuantity == 0)
                    {
                        <button class="btn btn-primary btn-sm add-to-cart-btn" @onclick="() => Cart.AddItem(extraPrikNoomItem)">
                            Add
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(extraPrikNoomItem)">-</button>
                            <span class="quantity-display">@extraPrikNoomQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(extraPrikNoomItem)">+</button>
                        </div>
                    }
                </div>
            </li>
            <li>
                <span class="addon-name">Extra Jao Dip (2oz)</span>
                <span class="addon-price">$2.25</span>
                <div class="cart-controls">
                    @{
                        var extraJaoDipItem = new MenuItem 
                        { 
                            Id = 8, 
                            Name = "Extra Jao Dip (2oz)", 
                            Price = 2.25m, 
                            Category = "Add-Ons"
                        };
                        var extraJaoDipQuantity = Cart.GetQuantity(extraJaoDipItem);
                    }
                    
                    @if (extraJaoDipQuantity == 0)
                    {
                        <button class="btn btn-primary btn-sm add-to-cart-btn" @onclick="() => Cart.AddItem(extraJaoDipItem)">
                            Add
                        </button>
                    }
                    else
                    {
                        <div class="quantity-controls">
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.RemoveItem(extraJaoDipItem)">-</button>
                            <span class="quantity-display">@extraJaoDipQuantity</span>
                            <button class="btn btn-outline-secondary btn-sm" @onclick="() => Cart.AddItem(extraJaoDipItem)">+</button>
                        </div>
                    }
                </div>
            </li>
        </ul>
    </div>

    <!-- Cart Summary Button -->
    @if (Cart.Items.Any())
    {
        <div class="cart-summary-section">
            <div class="cart-summary">
                <p><strong>@Cart.Items.Sum(i => i.Quantity) items in cart</strong></p>
                <p>Total: $@Cart.Items.Sum(i => i.Item.Price * i.Quantity).ToString("F2")</p>
                <a href="/Finalize" class="btn btn-success btn-lg">
                    Proceed to Checkout
                </a>
            </div>
        </div>
    }
</div>

<style>
    .cart-controls {
        padding: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .add-to-cart-btn {
        background-color: #ee6900;
        border-color: #ee6900;
        font-family: 'Rock Salt', cursive;
        min-width: 120px;
    }

    .add-to-cart-btn:hover {
        background-color: #d55a00;
        border-color: #d55a00;
    }

    .quantity-controls {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .quantity-display {
        font-size: 1.2rem;
        font-weight: bold;
        min-width: 30px;
        text-align: center;
    }

    .addon-name {
        font-weight: bold;
        margin-right: 10px;
    }

    .addon-price {
        color: #ee6900;
        font-weight: bold;
    }

    .menu-section ul li {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 2rem;
    }

    .menu-section .section-header-text + ul li {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* Add-ons section styling */
    .menu-section:last-of-type ul li {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border-bottom: 1px solid #eee;
    }

    .cart-summary-section {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
    }

    .cart-summary {
        background: #fff;
        border: 2px solid #ee6900;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        text-align: center;
        min-width: 200px;
    }

    .cart-summary p {
        margin: 5px 0;
    }
</style>
